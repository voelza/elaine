var Wt=Object.defineProperty;var Ut=(h,p,f)=>p in h?Wt(h,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):h[p]=f;var l=(h,p,f)=>(Ut(h,typeof p!="symbol"?p+"":p,f),f);(function(h,p){typeof exports=="object"&&typeof module!="undefined"?module.exports=p():typeof define=="function"&&define.amd?define(p):(h=typeof globalThis!="undefined"?globalThis:h||self,h.ELAINE=p())})(this,function(){"use strict";const h="@@",p="++",f="~",C="!++",Q="##",Y=n=>new RegExp(h+"{"+n.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&")+"}","g"),tt=n=>new RegExp(h+n.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),g=new RegExp(h+"([!]?[a-zA-Z0-9\\(@@\\)_$.,\\s~]+)","g"),W=new RegExp(h+"\\{([!]?[a-zA-Z0-9\\(@@\\)_$.,\\s~]+)\\}","g"),et=new RegExp(h+"\\{(\\{.+\\})\\}","g"),nt=new RegExp("(.+) in (.+)","g");function A(n,t){if(!t)return t;if(t instanceof Object){let e=t,i=n.indexOf(".");return i!==-1&&(n=n.substring(i+1),e=e.getValueForKeyPath(n)),e}else return t}function O(n){let t=n,e=t.indexOf(".");return e!==-1&&(t=t.substring(0,e)),t}function k(n){let t=n,e=t.indexOf(".");return e!==-1&&(t=t.substring(e+1)),t}class w{constructor(t,e){l(this,"bindingsMap");l(this,"parseTokens");this.bindingsMap=new Map;const i=[];for(const s of t.split(" ").filter(o=>o)){let o=s;if(o.startsWith("!")&&o!=="!="&&(o=o.substring(1),i.push("!")),i.push(o),o.startsWith(h)){const a=o.substring(h.length),r=e.find(u=>u.binding===a);r&&this.bindingsMap.set(a,r)}}this.parseTokens=i}getBindings(){return Array.from(this.bindingsMap.values())}eval(){var a;const t=[];for(const r of this.parseTokens)if(r.startsWith(h)){const u=r.substring(h.length),c=this.bindingsMap.get(u);c&&t.push(A(u,(a=c.state)==null?void 0:a.value))}else t.push(r);let e=[],i=0;for(;i<t.length;){const r=t[i];if(r==="!"){const u=t[i+1];e.push(!u),i=i+2}else if(r==="&&")e.push("&&"),i=i+1;else if(r==="||")e.push("||"),i=i+1;else{const u=t[i+1];if(this.isOperator(u)){const c=t[i+2];e.push(this.evalCondition(r,u,c)),i=i+3}else e.push(r),i=i+1}}let s=e[0],o=1;for(;o<e.length;){let r=e[o];if(r==="&&"){const u=e[o+1];u!=null&&(s=s&&u,o+=2)}else if(r==="||"){const u=e[o+1];u!=null&&(s=s||u,o+=2)}else o++}return s}isOperator(t){return t==="<"||t==="<="||t===">"||t===">="||t==="=="||t==="!="||t==="!=="||t==="==="}parseValue(t){return t==="null"?null:t==="undefined"?void 0:t}evalCondition(t,e,i){let s=this.parseValue(t),o=this.parseValue(i);return e==="<"?s<o:e==="<="?s<=o:e===">"?s>o:e===">="?s>=o:e==="=="?s instanceof Object&&o instanceof Object?JSON.stringify(s)==JSON.stringify(o):s==o:e==="==="?s instanceof Object&&o instanceof Object?JSON.stringify(s)===JSON.stringify(o):s===o:e==="!="?s instanceof Object&&o instanceof Object?JSON.stringify(s)!=JSON.stringify(o):s!=o:e==="!=="?s instanceof Object&&o instanceof Object?JSON.stringify(s)!==JSON.stringify(o):s!==o:!1}}class I{constructor(t){l(this,"_value");l(this,"subscribers",[]);l(this,"watchers",[]);this._value=t,this._value instanceof Array?this._value=new Proxy(this._value,{get:(e,i,s)=>{const o=Reflect.get(e,i,s);return i==="push"||i==="shift"||i==="unshift"||i==="pop"||i==="sort"?(...a)=>{e[i](...a),this.notify()}:i==="splice"?(a,r)=>{e[i](a,r),this.notify()}:o}}):this._value instanceof Object&&(this._value=new Proxy(this._value,{set:(e,i,s,o)=>{const a=Reflect.set(e,i,s,o);return this.notify(),a}}))}set value(t){this.set(t)}get value(){return this._value}set(t){this._value!==t&&(this._value=t,this.notify())}setPathValue(t,e){this._value.setValueForKeyPath(t,e),this.notify()}subscribe(t){this.subscribers.push(t)}unsubscribe(t){const e=this.subscribers.indexOf(t);e!==-1&&this.subscribers.splice(e,1)}addWatcher(t){this.watchers.push(t)}notify(){for(const t of this.subscribers)t.update();for(const t of this.watchers)t()}}class N{constructor(t){l(this,"value");l(this,"subscribers",[]);this.value=t}set(){}setPathValue(){}subscribe(t){this.subscribers.push(t)}unsubscribe(t){const e=this.subscribers.indexOf(t);e!==-1&&this.subscribers.splice(e,1)}addWatcher(){}notify(){}}class y{constructor(t,e){l(this,"value");l(this,"computer");l(this,"parents",[]);l(this,"subscribers",[]);l(this,"watchers",[]);this.computer=t,this.value=this.computer(),this.parents=e}init(){}update(){this.value=this.computer(),this.notify()}destroy(){for(const t of this.parents)t.unsubscribe(this)}notify(){for(const t of this.subscribers)t.update();for(const t of this.watchers)t()}notifyParents(){for(const t of this.parents)t.notify()}set(){}setPathValue(){}subscribe(t){this.subscribers.push(t)}unsubscribe(t){const e=this.subscribers.indexOf(t);e!==-1&&this.subscribers.splice(e,1)}addWatcher(t){this.watchers.push(t)}}function _(n,t){const e=t.parentElement;if(!e)return;const i=t.nextSibling;e.insertBefore(n,i)}function B(n,t){const e=t.parentElement;!e||e.insertBefore(n,t)}class U extends N{}class P{constructor(t){l(this,"bindings",[]);this.bindings=t}bind(t){var i;const e=this.bindings.reduce((s,o)=>(s.find(a=>a.stateName===o.stateName)===void 0&&s.push(o),s),[]);for(const s of e)(i=s.state)==null||i.subscribe(t)}}class it extends P{constructor(t,e){super(t);l(this,"conditionalBindings",[]);this.conditionalBindings=e}init(){this.update()}update(){for(const t of this.conditionalBindings)t.condition.eval()?t.value.init():t.value.destroy()}destroy(){for(const t of this.conditionalBindings)t.value.destroy()}}function st(n,t){const e=[];for(const i of n.split(";")){const s=i.split(":"),o=s[0].trim(),a=new w(o,t),r=s[1].trim();e.push({condition:a,value:r,stateBindings:[]})}return e}function ot(n,t){const e=[];for(const i of t.split(";")){const s=i.split(":"),o=s[0].trim(),a=T(n,g,o),r=new w(o,a),u=s[1].trim();e.push({condition:r,stateBindings:a,value:u})}return e}class rt extends P{constructor(t,e,i,s){super(e);l(this,"element");l(this,"eventName");l(this,"listener");var o;this.bind(this),this.element=t,this.eventName=i,this.listener=a=>{var u;const r=[];for(const c of e)r.push(A(c.binding,(u=c.state)==null?void 0:u.value));return r.push(a),s(...r)},(o=this.element)==null||o.removeAttribute(p+this.eventName),this.immediateInitNeeded()&&this.init()}immediateInitNeeded(){return this.bindings.length===0||this.bindings.filter(t=>t.state instanceof U).length===this.bindings.length}init(){var t;(t=this.element)==null||t.addEventListener(this.eventName,this.listener)}update(){}destroy(){var t;(t=this.element)==null||t.removeEventListener(this.eventName,this.listener)}}function at(n,t){const e=[];let i=n;const s=i.indexOf("(");if(s!==-1){i=n.substring(0,s);const o=n.substring(s+1,n.length-1).split(",").map(a=>a.trim());for(const a of o){const r=a.replace(h,"");let u,c;a.startsWith(h)?(u=O(r),c=u.startsWith(f)?t.parent.getState(u.substring(f.length)):t.getState(u)):(u=r,c=new U(r)),e.push({binding:r,stateName:u,stateSubPath:k(r),state:c})}}return{name:i,params:e}}function L(n,t,e,i){const s=at(i,n),o=s.name,a=s.params,r=n.getMethod(o);if(r)return new rt(t,a,e,r)}function lt(n,t,e,i){const s=ot(n,i.substring(1,i.length-1)),o=[];for(const r of s){const u=L(n,t,e,r.value);u&&o.push({condition:r.condition,stateBindings:r.stateBindings,value:u})}const a=[];for(const r of o){const u=r.stateBindings;if(u)for(const m of u)a.push(m);const c=r.value;for(const m of c.bindings)a.find(d=>d.binding===m.binding)===void 0&&a.push(m)}n.addLink(new it(a,o))}function F(n,t,e,i=void 0){const s=e.name.substring(h.length),o=e.value;if(o.startsWith("{")&&o.endsWith("}"))lt(n,t,s,o);else return o.startsWith(C)&&i!==void 0?L(i,t,s,o.substring(C.length)):L(n,t,s,o)}function K(n,t,e=0){const i=[];let s=n.exec(t);for(;s!==null;)i.push(s[e]),s=n.exec(t);return i}function ut(n,t,e=1){return K(n,t,e).map(s=>{const o=s.trim(),a=O(o).trim(),r=k(o).trim();return{binding:o,stateName:a,stateSubPath:r}})}function ht(n,t,e=[0]){const i=[];let s=n.exec(t);for(;s!==null;){const o=[];for(const a of e){const r=s[a];r&&o.push({group:a,value:r})}i.push({matches:o}),s=n.exec(t)}return i}function T(n,t,e,i=1){return ut(t,e,i).filter(s=>{const o=s.stateName,a=n.getState(o);if(a)return s.state=a,!0;const r=o.substring(0,o.indexOf("(")).trim();if(!n.getMethod(r))return!1;const c=L(n,void 0,"",s.binding);if(!c)return!1;const m=[];for(const b of c.bindings)b.state&&m.push(b.state);const d=new y(()=>c.listener(void 0),m);for(const b of m)b.subscribe(d);return n.addLink(d),s.stateName=r,s.state=d,!0})}function ct(n,t){if(t.startsWith(h)){const s=t.substring(h.length),o=O(s),a=n.getState(o);if(a)return{computer:()=>A(s,a.value),states:[a]}}const e=t.substring(0,t.indexOf("(")).trim();if(n.getMethod(e)){const s=L(n,void 0,"",t),o=[];for(const a of s.bindings)a.state&&o.push(a.state);return{computer:()=>s.listener(void 0),states:o}}return{computer:()=>t,states:[]}}function $(n,t){const e=ct(n,t),i=new y(e.computer,e.states);for(const s of e.states)s.subscribe(i);return n.addLink(i),i}class J extends P{constructor(t,e,i=void 0){super(t);l(this,"template");l(this,"isConditional");l(this,"conditionalBindings",[]);l(this,"valueObjectsToStrConverter");this.bind(this),this.isConditional=e.startsWith("{")&&e.endsWith("}"),this.template=this.isConditional?e.substring(1,e.length-1):e,this.valueObjectsToStrConverter=i,this.isConditional&&(this.conditionalBindings=st(this.template,t))}init(){this.update()}destroy(){var t;for(const e of this.bindings)(t=e.state)==null||t.unsubscribe(this)}update(){if(this.isConditional){let t="";for(const e of this.conditionalBindings)e.condition.eval()&&(t+=this.applyBindingsToTemplate(e.value)+" ");this.updateBinding(t)}else this.updateBinding(this.applyBindingsToTemplate(this.template))}applyBindingsToTemplate(t){let e=t;for(const i of this.bindings)e=this.updateTemplate(e,i);return e.replaceAll(new RegExp(Q,"g"),"")}updateTemplate(t,e){var r;let i=t;if(!e.binding)return i;const s=this.bindingRegex(e.binding),o=(r=e.state)==null?void 0:r.value,a=A(e.binding,o);return i=i.replaceAll(s,this.valueAsString(a)),i}valueAsString(t){return t instanceof Object?this.valueObjectsToStrConverter?this.valueObjectsToStrConverter(t):JSON.stringify(t):t}bindingRegex(t){return tt(t)}}class dt extends J{constructor(t,e,i){super(e,i.trim());l(this,"text");this.text=t}bindingRegex(t){return Y(t)}updateBinding(t){this.text.textContent=t}}function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,e=n=="x"?t:t&3|8;return e.toString(16)})}class ft{constructor(t,e,i){l(this,"element");l(this,"binding");l(this,"isPathValue");l(this,"inputListener");l(this,"targetAttribute");l(this,"eventListener");this.element=e,this.binding=i,this.isPathValue=i.binding!==i.stateName,this.inputListener=this.getInputListener(i),this.element.removeAttribute(h+"model"),this.targetAttribute=e.getAttribute("type")==="checkbox"?"checked":"value",this.eventListener=this.createInputListener(t)}getInputListener(t){return this.isPathValue?e=>{var s;const i=e.target;i&&((s=t.state)==null||s.setPathValue(t.stateSubPath,i[this.targetAttribute]))}:e=>{const i=e.target;i&&t.state&&(t.state.value=i[this.targetAttribute])}}createInputListener(t){const e=this.binding.binding+"-"+R();return t.addMethod(e,this.inputListener),F(t,this.element,{name:"++input",value:e})}init(){var t;this.update(),(t=this.eventListener)==null||t.init()}update(){var t,e,i;this.isPathValue?this.element[this.targetAttribute]=(e=(t=this.binding.state)==null?void 0:t.value)==null?void 0:e.getValueForKeyPath(this.binding.stateSubPath):this.element[this.targetAttribute]=(i=this.binding.state)==null?void 0:i.value}destroy(){var t,e;(t=this.eventListener)==null||t.destroy(),(e=this.binding.state)==null||e.unsubscribe(this)}}class mt extends I{constructor(t,e){super(t);l(this,"list");this.list=e}notify(){super.notify(),this.list instanceof y?this.list.notifyParents():this.list.notify()}}class pt{constructor(t,e,i,s){l(this,"id",R());l(this,"instance");l(this,"loopValueName");l(this,"binding");l(this,"forComment");l(this,"loopTemplate");l(this,"initDone");l(this,"loopInstances");this.initDone=!1,this.instance=t,this.loopValueName=i,this.binding=s,this.forComment=document.createComment("for-"+this.id),_(this.forComment,e),e.remove(),this.loopTemplate=e.cloneNode(!0),e.removeAttribute(h+"for"),this.loopTemplate.removeAttribute(h+"for"),this.loopInstances=[]}init(){var t;this.initDone||(this.initDone=!0,this.insertLoopChildren(A(this.binding.binding,(t=this.binding.state)==null?void 0:t.value)))}update(){var t;this.resetLoop(),this.insertLoopChildren(A(this.binding.binding,(t=this.binding.state)==null?void 0:t.value))}destroy(){var t;for(const e of this.loopInstances)e.destroy();(t=this.binding.state)==null||t.unsubscribe(this)}resetLoop(){for(const t of this.loopInstances)t.unmount(),t.destroy();this.loopInstances=[]}insertLoopChildren(t){if(!!t)for(let e=t.length-1;e>=0;e--){const i=t[e],s=new M(S.LOOP,this.loopTemplate,this.loopTemplate,this.instance);s.merge(this.instance),s.addState(this.loopValueName,new mt(i,this.binding.state)),s.addState("_index",new N(e)),s.appendMount(this.forComment),this.loopInstances.push(s)}}}const bt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","truespeed"];class gt extends J{constructor(t,e,i,s){super(e,s,o=>{if(o instanceof Array)return o.join(" ");let a="";for(const r in o)a+=r+":"+o[r]+";";return a});l(this,"element");l(this,"attribute");l(this,"staticValue");l(this,"isBooleanAttribute");this.element=t,this.attribute=i,this.isBooleanAttribute=bt.includes(this.attribute),this.element.removeAttribute(h+this.attribute),this.staticValue=this.element.getAttribute(this.attribute)}updateBinding(t){this.element.removeAttribute(this.attribute);let e="";this.staticValue!==null&&(e+=this.staticValue,e+=" "),e+=t,(!this.isBooleanAttribute||e==="true")&&this.element.setAttribute(this.attribute,e)}}class q extends P{constructor(t,e,i,s,o=void 0){super(e);l(this,"id",R());l(this,"ifComment");l(this,"element");l(this,"instance");l(this,"condition");l(this,"isElementRendered");this.bind(this),this.condition=i,this.ifComment=document.createComment("if-"+this.id),B(this.ifComment,t),this.element=t,this.element.removeAttribute(h+"if"),this.instance=o!=null?o:new M(S.IF,this.element,this.element).merge(s),this.element.remove()}init(){this.eval()}update(){this.eval()}destroy(){var t;for(const e of this.bindings)(t=e.state)==null||t.unsubscribe(this);this.instance.destroy()}eval(){const t=this.condition.eval();t?(!this.isElementRendered||this.isElementRendered===void 0)&&(this.isElementRendered=t,this.instance.appendMount(this.ifComment)):(this.isElementRendered||this.isElementRendered===void 0)&&(this.isElementRendered=t,this.instance.unmount())}}function V(n,t,e=void 0){if(t.tagName==="SCRIPT"||t instanceof Comment)return;if(t.tagName==="TEMPLATE-STATE"){Ct(n,t);return}if(t.hasAttribute&&t.hasAttribute(G)){Lt(n,t,e);return}let i=!0;!(t instanceof Text)&&t.hasAttributes()&&(i=yt(n,t,e)),t instanceof Text&&Nt(n,t),i&&t.hasChildNodes()&&!n.isComponentElement(t.tagName)&&vt(n,t.childNodes,e)}function vt(n,t,e=void 0){for(let i=0;i<t.length;i++){const s=t[i];V(n,s,e)}}function Nt(n,t){const e=t.textContent;if(!e)return;let i=[];const s=K(et,e,1);let o=e;s.length===1?(o=s[0],i=T(n,g,o)):i=T(n,W,e),i.length!==0&&n.addLink(new dt(t,i,o))}function yt(n,t,e=void 0){let i=!0;for(const s of Array.from(t.attributes))if(s.name===h+"for")Tt(n,t,s),i=!1;else if(s.name===h+"model")At(n,t,s);else if(s.name===h+"if")xt(n,t,s),i=!1;else if(s.name.startsWith(h))Et(n,t,s);else if(s.name.startsWith(p))if(n.getComponent(t.tagName)!==void 0)s.value.startsWith(C)&&(s.value=s.value.substring(C.length)),s.value=C+s.value;else{const a=F(n,t,s,e);a&&n.addLink(a)}return i}function Tt(n,t,e){var u,c,m;const i=ht(nt,e.value,[1,2]);if(i.length!==1)return;const s=i[0].matches,o=(u=s.find(d=>d.group===1))==null?void 0:u.value.trim(),a=(c=s.find(d=>d.group===2))==null?void 0:c.value.trim();if(!o||!a)return;const r=T(n,g,a);if(r.length===1){const d=r[0],b=new pt(n,t,o,d);(m=d.state)==null||m.subscribe(b),n.addLink(b)}}function At(n,t,e){const i=e.value.replaceAll(h,"").trim(),s=i.startsWith(f),o=s?i.substring(f.length):i,a=s?n.parent:n,r=O(o),u=a.getState(r);if(!u)return;const c=k(o),m={binding:o,stateName:r,stateSubPath:c,state:u},d=new ft(a,t,m);u.subscribe(d),a.addLink(d)}function xt(n,t,e){if(n.getComponent(t.tagName))return;const i=e.value,s=T(n,g,i);s.length!==0&&n.addLink(new q(t,s,new w(i,s),n))}function Et(n,t,e){const i=e.name.substring(h.length),s=e.value,o=T(n,g,s);o.length!==0&&n.addLink(new gt(t,o,i,s))}function Ct(n,t){for(const e of Array.from(t.attributes))n.addState(e.name,$(n,e.value));t.remove()}function Lt(n,t,e){const i=t.getAttribute(z),s=$(n,i);let o=null;for(const r of Array.from(t.children)){const u=r.tagName.toLowerCase();if(u==(s==null?void 0:s.value)){o=r;break}else o===null&&u==="default"&&(o=r);r.remove()}if(!o)throw"Slot-Resolve-Error: Slots with variants must provide a default slot!";const a=Array.from(o.childNodes);for(const r of a)B(r,t),V(n,r,e);t.remove()}var S=(n=>(n[n.SETUP=0]="SETUP",n[n.COMPONENT=1]="COMPONENT",n[n.IF=2]="IF",n[n.LOOP=3]="LOOP",n))(S||{});const G="elaine-slot",z="elaine-slot-resolver",X="elaine-parent-component";function St(n){return n.toLocaleDateString()}function Ot(n){return n.toLocaleTimeString()}function wt(n){return n.toLocaleDateString()+" "+n.toLocaleTimeString()}const j=[];class M{constructor(t,e,i,s=void 0,o=[],a=[],r=void 0,u=void 0,c=void 0,m=void 0,d=void 0,b=void 0,E=void 0){l(this,"origin");l(this,"element");l(this,"parent");l(this,"template");l(this,"states",new Map);l(this,"methods",new Map);l(this,"components",new Map);l(this,"links",[]);l(this,"childInstances",[]);l(this,"condition");l(this,"conditionLink");l(this,"props",[]);l(this,"slots",[]);l(this,"setup");l(this,"onMounted");l(this,"beforeUnmounted");l(this,"onUnmounted");l(this,"beforeDestroyed");l(this,"onDestroyed");l(this,"internalState");l(this,"wasCreated");l(this,"dispatchEvent");l(this,"styleElement");this.origin=t,this.element=e,this.template=i.cloneNode(!0),this.parent=s,this.props=o,this.slots=a,this.setup=r,this.onMounted=u,this.beforeUnmounted=c,this.onUnmounted=m,this.beforeDestroyed=d,this.onDestroyed=b;for(const v of E!=null?E:[])this.components.set(v.name,v);if(this.dispatchEvent=(v,D)=>{const Dt=new CustomEvent(v,{detail:D});this.template.dispatchEvent(Dt)},this.internalState={element:this.template,data:{},methods:{},refs:{},dispatchEvent:this.dispatchEvent},this.condition=this.extractCondition(e),this.condition&&(this.conditionLink=new q(e,this.condition.getBindings(),this.condition,void 0,this),this.conditionLink.init()),this.wasCreated=!1,this.methods.set("$date",St),this.methods.set("$time",Ot),this.methods.set("$dateTime",wt),this.components.size>0)for(const v of this.components.values()){j.push(v.name);for(const D of v.slots)j.push(D.toUpperCase())}}isComponentElement(t){return j.includes(t)}setupIfNeeded(){if(!this.wasCreated){this.resolveProps(this.element,this.parent),this.resolveSetup(),this.resolveSlots(this.element);for(const t of Array.from(this.element.attributes)){if(t.name.startsWith(H))continue;const e=t.cloneNode(!0);this.template.attributes.setNamedItem(e)}V(this,this.template,this.parent);for(const t of this.links)t.init();if(this.initComponents([this.template]),this.origin===0){const t=this.gatherAllComponents().map(e=>e.css).filter(e=>e!==void 0).reduce((e,i)=>e+" "+i,"");t&&(this.styleElement=document.createElement("style"),this.styleElement.textContent=t)}this.wasCreated=!0}}gatherAllComponents(){return[...this.components.values(),...this.childInstances.map(t=>t.components.values()).flatMap(t=>Array.from(t))]}addLink(t){this.links.push(t)}getState(t){var o;if(t.startsWith(f))return(o=this.parent)==null?void 0:o.getState(t.substring(f.length));const e=this.states.get(t);if(!t.startsWith("!"))return e;const i=this.states.get(t.substring(1));if(!i)return;const s=new y(()=>!i.value,[i]);return i.subscribe(s),this.states.set(t,s),this.addLink(s),s}addState(t,e){this.states.set(t,e)}merge(t){if(!t)return this;for(const e of t.states.entries())this.states.set(e[0],e[1]);for(const e of t.methods.entries())this.addMethod(e[0],e[1]);for(const e of t.components.entries())this.registerComponent(e[0],e[1]);return this.parent=t.parent,this}getMethod(t){var e;return t.startsWith(f)?(e=this.parent)==null?void 0:e.getMethod(t.substring(f.length)):this.methods.get(t)}addMethod(t,e){this.methods.set(t,e)}registerComponent(t,e){this.components.set(t,e)}getComponent(t){return this.components.get(t)}mount(){this.condition&&!this.condition.eval()||(_(this.template,this.element),this.element.remove(),this.setupIfNeeded(),this.styleElement&&document.body.prepend(this.styleElement),this.onMounted&&this.onMounted(this.internalState))}appendMount(t){this.condition&&!this.condition.eval()||(_(this.template,t),this.setupIfNeeded(),this.onMounted&&this.onMounted(this.internalState))}extractCondition(t){var s;const e=t.getAttribute(h+"if");if(!e)return;const i=T((s=this.parent)!=null?s:this,g,e);return new w(e,i)}resolveSlots(t){var e;for(const i of this.slots){const s=this.template.querySelector(i);if(!s)continue;const o=s.getAttribute("variant"),a=t.querySelector(i);if(a)if(Z(a,(e=this.parent)==null?void 0:e.components),o)a.setAttribute(G,""),a.setAttribute(z,o),B(a,s);else for(const r of Array.from(a.childNodes))B(r,s);s.remove()}}resolveProps(t,e){for(const i of this.props){const s=i.name,o=t.getAttribute(s);if(o){const a=o.substring(h.length),r=e==null?void 0:e.getState(a);if(r&&r instanceof I||r instanceof N||r instanceof y)this.states.set(s,r),this.internalState.data[s]=r;else if(o){const u=new N(this.parseIntoType(i.type,o));this.states.set(s,u),this.internalState.data[s]=r}t.removeAttribute(s)}else{if(i.required||i.required===void 0)throw`Prop-Read-Error: "${s}" is a required prop and was not provided.`;{const a=new N(i.default);this.states.set(s,a),this.internalState.data[s]=i.default}}}}parseIntoType(t,e){return e==="null"?null:e==="undefined"?void 0:t===Number?e.includes(".")?Number.parseFloat(e):Number.parseInt(e):t===Boolean?e==="true":t===Object||t===Array?JSON.parse(e):e}resolveSetup(){if(!this.setup)return;const t=this.setup(this.internalState);if(t){for(const e of t.components||[])this.registerComponent(e.name,e);for(const e in t.state){const i=t.state[e];i instanceof Function?(this.methods.set(e,i),this.internalState.methods[e]=i):i instanceof I||i instanceof y||i instanceof N?(this.states.set(e,i),this.internalState.data[e]=i):(this.states.set(e,new N(i)),this.internalState.data[e]=i)}}}initComponents(t){var e;for(let i=0;i<t.length;i++){const s=t[i],a=s.getAttribute&&s.getAttribute(X)!==null?(e=this.parent)==null?void 0:e.getComponent(s.tagName):this.getComponent(s.tagName);if(a!==void 0){const r=a.toInstance(s,this);this.childInstances.push(r);const u=s.getAttribute("ref");u&&(this.internalState.refs[u]=r.internalState),r.condition===void 0&&r.mount();continue}s.hasChildNodes()&&this.initComponents(s.childNodes)}}unmount(){var t;this.beforeUnmounted&&this.beforeUnmounted(this.internalState),this.template.remove(),(t=this.styleElement)==null||t.remove();for(const e of this.childInstances)e.unmount();this.onUnmounted&&this.onUnmounted(this.internalState)}destroy(){var t;this.beforeDestroyed&&this.beforeDestroyed(this.internalState);for(const e of this.childInstances)e.destroy();this.childInstances=[];for(const e of this.links)e.destroy();(t=this.conditionLink)==null||t.destroy(),this.onDestroyed&&this.onDestroyed(this.internalState)}}function Z(n,t){if(t!=null&&t.get(n.tagName)&&n.setAttribute(X,""),n instanceof Text&&n.textContent&&n.textContent.length!==0){const e=n.textContent.replaceAll(W,(i,s)=>h+"{"+x(s)+"}").replaceAll(g,(i,s)=>h+x(s));n.textContent=e}else if(n.hasAttributes())for(const e of Array.from(n.attributes))e.name===h+"model"?e.value=x(e.value.replace(h,"")):e.name.startsWith(p)?e.value=x(e.value).replaceAll(g,(i,s)=>h+x(s)):e.value=e.value.replaceAll(g,(i,s)=>h+x(s));n.hasChildNodes()&&It(n.childNodes,t)}function It(n,t){for(let e=0;e<n.length;e++){const i=n[e];Z(i,t)}}function x(n){return n.startsWith(f)?n.substring(f.length):f+n}const H="data-elaine-c-";class Bt{constructor(t,e,i=[],s=[],o=void 0,a=void 0,r=void 0,u=void 0,c=void 0,m=void 0,d=void 0){l(this,"name");l(this,"template");l(this,"props",[]);l(this,"slots",[]);l(this,"setup");l(this,"onMounted");l(this,"beforeUnmounted");l(this,"onUnmounted");l(this,"beforeDestroyed");l(this,"onDestroyed");l(this,"css");if(this.name=t,this.template=e.cloneNode(!0),this.props=i,this.slots=s,this.setup=o,this.onMounted=a,this.beforeUnmounted=r,this.onUnmounted=u,this.beforeDestroyed=c,this.onDestroyed=m,d){const b=H+t.toLowerCase();this.css=d.replaceAll(/.*\{/g,E=>`${E.substring(0,E.length-1).trim()}[${b}] {`).replace(/  |\r\n|\n|\r/gm,""),this.addAttributeToAllElements(this.template,b)}}addAttributeToAllElements(t,e){if(t.setAttribute(e,""),t.children.length>0)for(const i of Array.from(t.children))this.addAttributeToAllElements(i,e)}toInstance(t,e){return new M(S.COMPONENT,t,this.template,e,this.props,this.slots,this.setup,this.onMounted,this.beforeUnmounted,this.onUnmounted,this.beforeDestroyed,this.onDestroyed)}}Object.defineProperty(Object.prototype,"setValueForKey",{value:function(n,t){this[t]=n}}),Object.defineProperty(Object.prototype,"setValueForKeyPath",{value:function(n,t){if(n==null)return;if(n.indexOf(".")===-1){this.setValueForKey(t,n);return}const e=n.split("."),i=e.shift(),s=e.join(".");i&&this[i].setValueForKeyPath(s,t)}}),Object.defineProperty(Object.prototype,"getValueForKey",{value:function(n){return this[n]}}),Object.defineProperty(Object.prototype,"getValueForKeyPath",{value:function(n){if(n!=null){if(n.indexOf(".")===-1)return this.getValueForKey(n);var t=n.split("."),e=t.shift(),i=t.join(".");if(e)return this[e].getValueForKeyPath(i)}}});function Pt(n,t=void 0){const e=new M(S.SETUP,n,n,void 0,[],[],()=>t,t==null?void 0:t.onMounted,t==null?void 0:t.beforeUnmounted,t==null?void 0:t.onUnmounted,t==null?void 0:t.beforeDestroyed,t==null?void 0:t.onDestroyed,t==null?void 0:t.components);return e.mount(),console.log(e),e.internalState}function Mt(n){return new I(n)}function kt(n,...t){for(const e of t)e.addWatcher(n)}function _t(n,...t){const e=new y(n,t);for(const i of t)i==null||i.subscribe(e);return e}function Rt(n){const t=document.createElement("template");return n=n.trim(),t.innerHTML=n,t.content.firstChild}function Vt(n){const t=n.name.toUpperCase(),e=typeof n.template=="string"?Rt(n.template):n.template;return new Bt(t,e,n.props,n.slots,n.setup,n.onMounted,n.beforeUnmounted,n.onUnmounted,n.beforeDestroyed,n.onDestroyed,n.css)}var jt={setup:Pt,state:Mt,watch:kt,computed:_t,component:Vt};return jt});
